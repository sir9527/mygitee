



## 2.事务传播特性

### 2.1 Spring支持的7种事务传播特性

- **`REQUIRED`**：支持当前事务，如果当前没有事务，则新建事务，如果当前存在事务，则加入当前事务，合并成一个事务，如果一个方法发生异常回滚，则整个事务回滚

- **`REQUIRES_NEW`**：新建事务，如果当前存在事务，则把当前事务挂起，这个方法会独立提交事务，不受调用者的事务影响，父级异常，它也是正常提交。但如果是此方法发生异常未被捕获处理，且异常满足父级事务方法回滚规则，则父级方法事务会被回滚，即会带着父级事务一起回滚。

- **`SUPPORTS`**：支持当前事务，如果当前没有事务，就以非事务方式执行。

- **`MANDATORY`**：支持当前事务，如果当前没有事务，就抛出异常。

- **`NOT_SUPPORTED`**：以非事务方式执行操作，如果当前存在事务，就把当前事务挂起

- **`PROPAGATION_NEVER`**：以非事务方式执行，如果当前存在事务，则抛出异常

- **`NESTED`**：如果当前有事务，则开启子事务（嵌套事务），嵌套事务是独立提交或者回滚。如果当前没有事务，则同required。NESTED回滚特性：1.主事务和嵌套事务属于同一个事务。 2.嵌套事务出错回滚不会影响到主事务。3.主事务回滚会将嵌套事务一起回滚了。即嵌套事务出错不会带着主事务一起回滚，但主事务出错会带着嵌套事务一起回滚。
  
  ​                      

注：Spring 默认的事务传播行为是 PROPAGATION_REQUIRED，它适合于绝大多数的情况。

注：有异常才会回滚事务，如果异常被捕获，也就是try，catch，就不会回滚事务了

