



去重 和 幂等：本质都是 **唯一key** + **存储**



#### 1.去重

**定义**：去重：对请求或消息在**一定时间内**进行去重**N次**。

**实际使用**：

- 5min消息相同内容去重（MD5请求参数作为唯一key）

- 1h内模板去重（模板ID + userID 作为唯一key）  

- 1d内渠道达到n次阀值去重（渠道ID + userID 作为唯一key）

  

**布隆过滤器**：[布隆过滤器](./布隆过滤器.md)



#### 2.幂等

**幂等定义**：保证请求或消息在**任意时间内**进行处理，都需要保证结果一致
**实现方式**：数据库唯一索引实现幂等（3y经常用）



参考：https://mp.weixin.qq.com/s/m_Po9oWJKaK7_CVKGeqWEQ