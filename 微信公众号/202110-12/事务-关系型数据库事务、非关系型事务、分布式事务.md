



## 关系型数据库事务、非关系型事务、分布式事务

### 1.关系型数据库事务

A（原子性）、C（一致性）、I（隔离性）、D（持久性）





### 2.非关系型事务

CAP理论 和 BASE理论

**CAP理论**

- C（Consistency）：一致性。所有结点数据一致

- A（Availability）：可用性。一个或多个结点数据不是最新的

- P（Partition tolerance）：分区容错性。结点与结点不通信

CAP 3选2：一般用 **AP（推荐使用）**。
Zookeeper 保证CP；Eureka  保证 AP；Nacos 可以选择CP也可以选择AP



**BASE理论**

- 1.基本一致（Basically Agreement）：数据更新访问就是一致
- 2.软状态（Soft State）：容许后续部分或全部不能访问
- 3.最终一致性（Eventually Consistent）：经过一段时间访问数据一致

BASE是对CAP中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的结论，是基于CAP定理逐步演化而来的，其核心思想是即使无法做到强一致性（Strong consistency），但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性





## 3.分布式事务几种方案

- 2PC（二阶段提交    高并发扛不住）：阶段1：准备阶段      阶段2：提交阶段

- 3PC（三阶段提交）：阶段1：准备   阶段2：预提交    阶段3：提交

- TCC事务补偿型（（Try-Confirm-Cancel））（1个业务代码拆成3块）（类似2PC）

- 柔性事务 可靠消息 + 最终一致性方案（异步确保型）：RabbitMQ实现

注：Seata 阿里巴巴提供分布式事务







